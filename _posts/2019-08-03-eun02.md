---
layout: post
title: "[EUN PROJECT] ##01"
date: 2019-08-03
author: Uzihoon
comments: true
subtitle: Front-End 환경 셋팅
categories: eun project
tags: eun project
---

[EUN PROJECT] ##01

## Front-End 환경 셋팅

CREACT-REACT-APP 3.0.1 버전을 사용하여 설치 하였다.

프로젝트 구조는 아래와 같다.

├─components
│ ├─common
│ │ ├─InfoMessage
│ │ ├─PageTemplate
│ │ └─Upload
│ ├─containers
│ ├─Loading
│ └─Login
├─lib
├─pages
├─store
│ ├─modules
│ └─saga
├─styles
└─worker

먼저 components에는 container component와 view component가 들어간다.

common 폴더에는 공통으로 사용할 만한 component들이 들어있다. Message를 띄워주는 Component나 전체 Page layout component, 그 외에도 전체 페이지에서 사용할 만한 Component들을 배치 시켰다.

그 외 Component들은 각 Component 역활별로 네이밍 해서 폴더에 scss 파일과 같이 분리 시켰고, Container Component들은 Container 폴더 안에 두었다. View Component들은 scss과 같이 사용될 확률이 높으므로 따로 폴더로 분리하였고 Container Component들은 독립적인 파일로 떨어지기 때문에 Container 폴더 안에 전부 배치하였다.

물론 나중에 공통적으로 사용될 만한 Container Component의 경우 Container 아래 Common으로 둘 예정이다.

lib 폴더에는 api 파일과, 라이브러리 처럼 사용할 만한 Component 또는 함수들이 들어갈 예정이다.

pages는 각 페이지의 최상단 Component로, App.js에서 page route할때 root로 사용할 Component들이 들어있다.
각 page별로 Component를 관리함으로서, 해당 URL 접속시 필요한 설정값이나, page별 id를 부여함으로서 공통 Component에서도 각 페이지별로 보여줄 정보를 핸들링해서 보여 줄 수 있도록 할 예정이다.

store에서는 Redux관련 파일들이 들어갈 예정이다.
modules에서는 reducer들을 전부 관리하고, redux middleware로 redux-saga를 활용하여 비동기 처리나, 외부와 통신할 에정이다.

styles 에는 공통적으로 들어갈 style들이 들어있다.

worker폴더는 현재 front에서 처리해야할 핵심적인 기능을 처리할 worker를 배치할 예정이다.

.gz 파일이 많으면 서버로 보내서 데이터를 가공한 후 다시 클라리언트로 보내게 되면 통신에 걸리는 시간도 있고 비용적인 측면도 문제가 있으므로, 서버로 통신하지 않고, client에서 처리 후, 나온 결과값을 서버로 저장하는 방식으로 진행할 예정이다.
처음에 fastq 파일 가공적인 부분에 문제가 있어 파이썬으로 해결하려 했으나, js에서 사용할 라이브러리가 있어서 이것을 활용하여 최대한 클라이언트에서 가공해서 결과값을 보여줄 것이다.

```javascript
{
  "antd": "^3.20.7",
  "axios": "^0.19.0",
  "classnames": "^2.2.6",
  "http-proxy-middleware": "^0.19.1",
  "immutable": "^4.0.0-rc.12",
  "node-sass": "^4.12.0",
  "query-string": "^6.8.2",
  "react": "^16.8.6",
  "react-dom": "^16.8.6",
  "react-redux": "^7.1.0",
  "react-router-dom": "^5.0.1",
  "react-scripts": "3.0.1",
  "redux": "^4.0.4",
  "redux-actions": "^2.6.5",
  "redux-saga": "^1.0.5"
}
```

UI 라이브러리로 antd를 사용하였다. 머터리얼 디자인 보다는 덜 흔해서 좋기도 하고 기본적으로 사용할 것 이상으로 잘 구현되어있어서 선택하였다. 개인적으로 디자인까지 해보고 싶긴 한데 우선 버전 1.0 에서는 최대한 기능 위주로 개발 하고 추후 버전을 높이면서 다듬을 예정이다. antd는 전부 좋긴 한데 아쉬운점은
1. 중국회사에서 만들다 보니 종종 관련 질문들이 중국어로 밖에 올라오지 않는 경우가 많다.. (중국 사이트 뿐만 아니라 github issue에서도 오죽하면 영어로 달아달라고 적어놓은 사람도 있다.)
2. 현재 프로젝트 style들은 sass로 되어있는 antd는 less기반이다. custom 하지 않는 이상 큰 문제는 없지만 custom을 해야하는 상황이 오면 모든 UI Framework가 그렇듯 지옥이 펼쳐진다.

ajax lib로는 axios를 사용했다. CSS Module 사용을 위해 classnames lib 추가 설치 해줬다. 크게 중요한 부분은 아니지만 개발이 고도화 됨에 따라 네이밍 적인 부분에서 겹치게 되면 style이 깨지게 되는 경우가 발생하고 style 중첩되는 부분은 생각보다 까다롭고 지저분해지는 경우가 많이 때문에 Component별로 Style 적용을 위해 필수라고 생각한다.

store 관리를 위해 redux와 middleware인 saga를 적용했다. saga에서는 외부와 통신하고 복잡한 로직을 분리함으로서 react component에서는 간단한 event handling을 제외한고는 보다 view에 집중할 수 있도록 하였다.

불변성을 지키기 위해서는 immutable를 적용하였다. 순수한 객체를 유지시키는게 개발하다보면 생각보다 어려운 일 인것 같다. 
게다가 깊은 구조로 되어있는 data를 변경하면서 순수성을 지키려는게 까다롭기 때문에 필수로 필요한 lib중 하나라고 생각한다.

우선 가장 기초적인 setting은 이정도로 하고 개발하면서 내용을 추가해야겠다.